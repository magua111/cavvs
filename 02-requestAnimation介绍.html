<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>

  <script>
    // requestAnimationFrame()
    // 这个方法是 HTML5中提供的，专门用于js中实现动画效果的
    // 语法： requestAnimationFrame( 回调函数 );

    // 作用：传入一个回调函数作为参数，回调函数中一般就是一些DOM操作
    //       这样浏览器在下一次渲染页面的时候, 就会执行回调函数中指定的DOM操作
    //       渲染到页面中, 这样用户就能看到页面的内容的变化
    // 
    // 浏览器没渲染一次页面, 就会调用执行一次函数

    // 浏览器的刷新频率: 60帧/秒（FPS） 
    // 一秒钟刷新 60 次, 两帧的时间间隔为： 16.67ms
    // 浏览器的刷新频率会根据电脑的性能，相应的减少或增加

    // requestAnimationFrame 是随着浏览器的刷刷新频率来执行的，所以不管
    // 浏览器的刷新频率是多少，使用 requestAnimationFrame 都不会造成丢帧的问题！
    
    // 浏览器会把页面中所有的 requestAnimationFrame 指定的DOM操作，一次渲染
    // 提高了渲染的性能

    // js的页面慢的原因：重绘和重排

    var lastFarmeTime = new Date();
    var fn = function() {
      var curFrameTime = new Date();

      console.log(curFrameTime - lastFarmeTime);
      lastFarmeTime = curFrameTime;

      // 这行调用，一般位于函数的最后面
      requestAnimationFrame( fn );
    };
    fn();

    // 基本用法：
    /*var fn = function() {
      // DOM 操作
      console.log(1);

      // 这行调用，一般位于函数的最后面
      requestAnimationFrame( fn );
    };
    fn();*/
  </script>

</body>

</html>